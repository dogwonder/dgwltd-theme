(()=>{var $=Object.create;var H=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var R=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var F=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var B=(i,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of R(e))!N.call(i,r)&&r!==t&&H(i,r,{get:()=>e[r],enumerable:!(n=P(e,r))||n.enumerable});return i};var W=(i,e,t)=>(t=i!=null?$(O(i)):{},B(e||!i||!i.__esModule?H(t,"default",{value:i,enumerable:!0}):t,i));var C=F((ee,w)=>{var A=function(i){var e={addEvent:function(t,n,r,h){t.addEventListener?t.addEventListener(n,r,!1):t.attachEvent&&(t["e"+n+r]=r,t[n+r]=function(){t["e"+n+r](window.event,h)},t.attachEvent("on"+n,t[n+r]))},removeEvent:function(t,n,r){t.removeEventListener?t.removeEventListener(n,r):t.attachEvent&&t.detachEvent(n)},input:"",pattern:"38384040373937396665",keydownHandler:function(t,n){if(n&&(e=n),e.input+=t?t.keyCode:event.keyCode,e.input.length>e.pattern.length&&(e.input=e.input.substr(e.input.length-e.pattern.length)),e.input===e.pattern)return e.code(e._currentLink),e.input="",t.preventDefault(),!1},load:function(t){this._currentLink=t,this.addEvent(document,"keydown",this.keydownHandler,this),this.iphone.load(t)},unload:function(){this.removeEvent(document,"keydown",this.keydownHandler),this.iphone.unload()},code:function(t){window.location=t},iphone:{start_x:0,start_y:0,stop_x:0,stop_y:0,tap:!1,capture:!1,orig_keys:"",keys:["UP","UP","DOWN","DOWN","LEFT","RIGHT","LEFT","RIGHT","TAP","TAP"],input:[],code:function(t){e.code(t)},touchmoveHandler:function(t){if(t.touches.length===1&&e.iphone.capture===!0){var n=t.touches[0];e.iphone.stop_x=n.pageX,e.iphone.stop_y=n.pageY,e.iphone.tap=!1,e.iphone.capture=!1}},touchendHandler:function(){if(e.iphone.input.push(e.iphone.check_direction()),e.iphone.input.length>e.iphone.keys.length&&e.iphone.input.shift(),e.iphone.input.length===e.iphone.keys.length){for(var t=!0,n=0;n<e.iphone.keys.length;n++)e.iphone.input[n]!==e.iphone.keys[n]&&(t=!1);t&&e.iphone.code(e._currentLink)}},touchstartHandler:function(t){e.iphone.start_x=t.changedTouches[0].pageX,e.iphone.start_y=t.changedTouches[0].pageY,e.iphone.tap=!0,e.iphone.capture=!0},load:function(t){this.orig_keys=this.keys,e.addEvent(document,"touchmove",this.touchmoveHandler),e.addEvent(document,"touchend",this.touchendHandler,!1),e.addEvent(document,"touchstart",this.touchstartHandler)},unload:function(){e.removeEvent(document,"touchmove",this.touchmoveHandler),e.removeEvent(document,"touchend",this.touchendHandler),e.removeEvent(document,"touchstart",this.touchstartHandler)},check_direction:function(){var t=Math.abs(this.start_x-this.stop_x),n=Math.abs(this.start_y-this.stop_y),r=this.start_x-this.stop_x<0?"RIGHT":"LEFT",h=this.start_y-this.stop_y<0?"DOWN":"UP",l=this.tap===!0?"TAP":t>n?r:h;return l}}};return typeof i=="string"&&e.load(i),typeof i=="function"&&(e.code=i,e.load()),e};typeof w<"u"&&typeof w.exports<"u"?w.exports=A:typeof define=="function"&&define.amd?define([],function(){return A}):window.Konami=A});function I(){return typeof HTMLButtonElement<"u"&&"command"in HTMLButtonElement.prototype&&"source"in((globalThis.CommandEvent||{}).prototype||{})}function q(){document.addEventListener("invoke",o=>{o.type=="invoke"&&o.isTrusted&&(o.stopImmediatePropagation(),o.preventDefault())},!0),document.addEventListener("command",o=>{o.type=="command"&&o.isTrusted&&(o.stopImmediatePropagation(),o.preventDefault())},!0);function i(o,a,s=!0){Object.defineProperty(o,a,{...Object.getOwnPropertyDescriptor(o,a),enumerable:s})}function e(o){return o&&typeof o.getRootNode=="function"?o.getRootNode():o&&o.parentNode?e(o.parentNode):o}let t=new WeakMap,n=new WeakMap;class r extends Event{constructor(a,s={}){super(a,s);let{source:u,command:f}=s;if(u!=null&&!(u instanceof Element))throw new TypeError("source must be an element");t.set(this,u||null),n.set(this,f!==void 0?String(f):"")}get[Symbol.toStringTag](){return"CommandEvent"}get source(){if(!t.has(this))throw new TypeError("illegal invocation");let a=t.get(this);if(!(a instanceof Element))return null;let s=e(a);return s!==e(this.target||document)?s.host:a}get command(){if(!n.has(this))throw new TypeError("illegal invocation");return n.get(this)}get action(){throw new Error("CommandEvent#action was renamed to CommandEvent#command")}get invoker(){throw new Error("CommandEvent#invoker was renamed to CommandEvent#source")}}i(r.prototype,"source"),i(r.prototype,"command");class h extends Event{constructor(a,s={}){throw super(a,s),new Error("InvokeEvent has been deprecated, it has been renamed to `CommandEvent`")}}let l=new WeakMap;function c(o){Object.defineProperties(o.prototype,{commandForElement:{enumerable:!0,configurable:!0,set(a){if(this.hasAttribute("invokeaction"))throw new TypeError("Element has deprecated `invokeaction` attribute, replace with `command`");if(this.hasAttribute("invoketarget"))throw new TypeError("Element has deprecated `invoketarget` attribute, replace with `commandfor`");if(a===null)this.removeAttribute("commandfor"),l.delete(this);else if(a instanceof Element){this.setAttribute("commandfor","");let s=e(a);e(this)===s||s===this.ownerDocument?l.set(this,a):l.delete(this)}else throw new TypeError("commandForElement must be an element or null")},get(){if(this.localName!=="button")return null;if(this.hasAttribute("invokeaction")||this.hasAttribute("invoketarget"))return console.warn("Element has deprecated `invoketarget` or `invokeaction` attribute, use `commandfor` and `command` instead"),null;if(this.disabled)return null;if(this.form&&this.getAttribute("type")!=="button")return console.warn("Element with `commandFor` is a form participant. It should explicitly set `type=button` in order for `commandFor` to work"),null;let a=l.get(this);if(a)return a.isConnected?a:(l.delete(this),null);let s=e(this),u=this.getAttribute("commandfor");return(s instanceof Document||s instanceof ShadowRoot)&&u&&s.getElementById(u)||null}},command:{enumerable:!0,configurable:!0,get(){let a=this.getAttribute("command")||"";if(a.startsWith("--"))return a;let s=a.toLowerCase();switch(s){case"show-modal":case"close":case"toggle-popover":case"hide-popover":case"show-popover":return s}return""},set(a){this.setAttribute("command",a)}},invokeAction:{enumerable:!1,configurable:!0,get(){throw new Error("invokeAction is deprecated. It has been renamed to command")},set(a){throw new Error("invokeAction is deprecated. It has been renamed to command")}},invokeTargetElement:{enumerable:!1,configurable:!0,get(){throw new Error("invokeTargetElement is deprecated. It has been renamed to command")},set(a){throw new Error("invokeTargetElement is deprecated. It has been renamed to command")}}})}let p=new WeakMap;Object.defineProperties(HTMLElement.prototype,{oncommand:{enumerable:!0,configurable:!0,get(){return m.takeRecords(),p.get(this)||null},set(o){let a=p.get(this)||null;a&&this.removeEventListener("command",a),p.set(this,typeof o=="object"||typeof o=="function"?o:null),typeof o=="function"&&this.addEventListener("command",o)}}});function d(o){for(let a of o)a.oncommand=new Function("event",a.getAttribute("oncommand"))}let m=new MutationObserver(o=>{for(let a of o){let{target:s}=a;a.type==="childList"?d(s.querySelectorAll("[oncommand]")):d([s])}});m.observe(document,{subtree:!0,childList:!0,attributeFilter:["oncommand"]}),d(document.querySelectorAll("[oncommand]"));function y(o){if(o.defaultPrevented||o.type!=="click")return;let a=o.target.closest("button[invoketarget], button[invokeaction], input[invoketarget], input[invokeaction]");if(a&&(console.warn("Elements with `invoketarget` or `invokeaction` are deprecated and should be renamed to use `commandfor` and `command` respectively"),a.matches("input")))throw new Error("Input elements no longer support `commandfor`");let s=o.target.closest("button[commandfor], button[command]");if(!s)return;if(s.form&&s.getAttribute("type")!=="button")throw o.preventDefault(),new Error("Element with `commandFor` is a form participant. It should explicitly set `type=button` in order for `commandFor` to work. In order for it to act as a Submit button, it must not have command or commandfor attributes");if(s.hasAttribute("command")!==s.hasAttribute("commandfor")){let g=s.hasAttribute("command")?"command":"commandfor",k=s.hasAttribute("command")?"commandfor":"command";throw new Error(`Element with ${g} attribute must also have a ${k} attribute to function.`)}if(s.command!=="show-popover"&&s.command!=="hide-popover"&&s.command!=="toggle-popover"&&s.command!=="show-modal"&&s.command!=="close"&&!s.command.startsWith("--")){console.warn(`"${s.command}" is not a valid command value. Custom commands must begin with --`);return}let u=s.commandForElement;if(!u)return;let f=new r("command",{command:s.command,source:s,cancelable:!0});if(u.dispatchEvent(f),f.defaultPrevented)return;let v=f.command.toLowerCase();if(u.popover){let g=!u.matches(":popover-open");g&&(v==="toggle-popover"||v==="show-popover")?u.showPopover({source:s}):!g&&v==="hide-popover"&&u.hidePopover()}else if(u.localName==="dialog"){let g=!u.hasAttribute("open");g&&v==="show-modal"?u.showModal():!g&&v==="close"&&u.close()}}function b(o){o.addEventListener("click",y,!0)}function E(o,a){let s=o.prototype.attachShadow;o.prototype.attachShadow=function(f){let v=s.call(this,f);return a(v),v};let u=o.prototype.attachInternals;o.prototype.attachInternals=function(){let f=u.call(this);return f.shadowRoot&&a(f.shadowRoot),f}}c(HTMLButtonElement),E(HTMLElement,o=>{b(o),m.observe(o,{attributeFilter:["oncommand"]}),d(o.querySelectorAll("[oncommand]"))}),b(document),Object.assign(globalThis,{CommandEvent:r,InvokeEvent:h})}I()||q();var S=class extends HTMLElement{constructor(){super()}get url(){return this.getAttribute("url")||window.location.href}get title(){return this.getAttribute("title")||document.title}get description(){let e=document.querySelector('meta[name="description"]');return e?e.getAttribute("content"):""}get hasShareSupport(){return navigator.share}get hasClipboardSupport(){return navigator.clipboard}triggerShare(e){navigator.share({title:this.title,url:this.url,text:this.description}).then(()=>{this.renderAlert("Thanks!",e)}).catch(t=>console.error("Error sharing",t))}copyToClipboard(e){navigator.clipboard.writeText(this.url).then(()=>{this.renderAlert("Copied!",e)}).catch(t=>console.error(t))}renderAlert(e,t,n=3e3){let r=t?t.nextElementSibling:this.querySelector('[role="alert"]');r&&(r.innerText=e,setTimeout(()=>{r.innerText=""},n))}handleClick(e){switch(e.currentTarget.dataset.method){case"share":this.triggerShare(e.currentTarget);return;case"clipboard":this.copyToClipboard(e.currentTarget);return}}assignEvents(){let e=this.querySelectorAll("button");e.length&&e.forEach(t=>t.addEventListener("click",n=>this.handleClick(n)))}connectedCallback(){if(!this.hasShareSupport&&!this.hasClipboardSupport){console.log("No support so revert to MVE");return}this.innerHTML=`
        <ul class="dgwltd-share-actions cluster" role="list">
          ${this.hasShareSupport?`
            <li>
              <button class="button" data-method="share">Share</button>
              <div role="alert"></div>
            </li>
          `:""}
          ${this.hasClipboardSupport?`
            <li>
              <button class="button" data-method="clipboard">Copy URL</button>
              <div role="alert"></div>
            </li>
          `:""}
        </ul>
  
      `,this.assignEvents()}};customElements.define("share-actions",S);var M=W(C(),1);var L=class{constructor(e){this.element=e,this.currentIntensity=parseInt(e.getAttribute("current-intensity"))||150,this.init()}init(){this.setLevel(),this.render()}setLevel(){this.currentIntensity<100?this.level="low":this.currentIntensity<=250?this.level="moderate":this.level="high"}render(){this.element.innerHTML=`
      <div class="carbon-intensity-bar dgwltd-body-xs" data-level="${this.level}">
        <div class="carbon-intensity-content">
          <span class="carbon-intensity-value">Grid intensity: ${this.currentIntensity}</span>
          <span class="carbon-intensity-unit">gCO2/kWh</span>
          <span class="carbon-intensity-level">(${this.level})</span>
        </div>
        <div class="carbon-intensity-indicator" style="--intensity-value: ${this.currentIntensity}"></div>
      </div>
    `,this.element.setAttribute("data-gaw-level",this.level),this.element.setAttribute("data-gaw-location","GB"),this.element.setAttribute("data-gaw-intensity",this.currentIntensity)}},x=class{constructor(e){this.element=e,this.generationData=this.parseGenerationData(e.getAttribute("generation-data")),this.init()}init(){this.processData(),this.render()}parseGenerationData(e){try{let t=e.replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");return JSON.parse(t)}catch(t){return console.warn("Failed to parse generation data:",t),[]}}processData(){this.filteredMix=this.generationData.filter(t=>t.perc>0).sort((t,n)=>n.perc-t.perc);let e=["wind","solar","hydro"];this.renewablePercentage=this.filteredMix.filter(t=>e.includes(t.fuel)).reduce((t,n)=>t+n.perc,0),this.mixData=this.filteredMix.map(t=>`${t.fuel}:${t.perc}`).join(",")}render(){let e={wind:"#9bdb5e",solar:"#eedc30",nuclear:"#189aca",gas:"#ec994d",coal:"#000000",biomass:"#8b4513",hydro:"#0066cc",imports:"#555555",other:"#cccccc"},t=0,n=this.filteredMix.map((r,h)=>{let l=h===0?`${r.perc}+`:`${r.perc}_${t.toFixed(1)}+`,c=`<span data-fuel="${r.fuel}" aria-label="${r.fuel}: ${r.perc}%" style="--fuel-color: ${e[r.fuel]||"#cccccc"}; --fuel-percentage: ${r.perc}; --cumulative-percentage: ${t}">${l}</span>`;return t+=r.perc,c}).join("");this.element.innerHTML=`
    <div class="power-mix-container">
      <div class="dgwltd-chart" role="img" aria-label="UK power generation mix">
        ${n}<span class="chart-ring">+x20</span>
      </div>
      <div class="dgwltd-body-xs">
        <span class="renewable-percentage">${Math.round(this.renewablePercentage)}% renewable</span>
      </div>
    </div>
  `,this.element.setAttribute("data-gaw-location","UK"),this.element.setAttribute("data-gaw-mix",this.mixData),this.element.setAttribute("data-renewable-percentage",Math.round(this.renewablePercentage))}};function G(){document.querySelectorAll("carbon-intensity").forEach(i=>{new L(i)}),document.querySelectorAll("power-mix").forEach(i=>{new x(i)})}document.addEventListener("DOMContentLoaded",G);var _=992,U=()=>{document.querySelectorAll('a[rel="external"]').forEach(i=>{i.addEventListener("click",e=>{e.preventDefault(),window.open(i.href)})})},K=()=>{document.querySelectorAll('.scroll[href^="#"]').forEach(i=>{i.addEventListener("click",e=>{e.preventDefault(),i.getAttribute("href")!=="#"&&document.querySelector(i.getAttribute("href")).scrollIntoView({behavior:"smooth"})})})},z=(i,e,t)=>{let n=document.querySelector(i);if(!n)return;let r=document.querySelector(e),h=document.querySelector(t);window.subscribers=[];let l={status:"closed",enabled:!1},c=new Proxy(l,{set(d,m,y){let b={...d};return d[m]=y,window.subscribers.forEach(E=>E(d,b)),d}});new ResizeObserver(([{contentRect:d,target:m}])=>{c.enabled=d.width<=_,m.setAttribute("data-enabled",c.enabled)}).observe(h),n.addEventListener("click",()=>{let d=JSON.parse(n.getAttribute("aria-expanded"));c.status=d?"closed":"open",n.setAttribute("aria-expanded",!d),r.setAttribute("status",c.status),h.classList.toggle("masthead-is-open"),document.body.classList.toggle("nav-open"),document.documentElement.style.setProperty("--submenu-offset",r.offsetHeight+h.offsetHeight+"px")}),window.addEventListener("keydown",d=>{d.key.includes("Escape")&&(n.setAttribute("aria-expanded","false"),h.classList.remove("masthead-is-open"),document.body.classList.remove("nav-open"),c.status="closed",r.setAttribute("status",c.status))})},J=()=>{let i=document.getElementById("theme-switcher");if(!i)return;let e=t=>{t==="light"?(document.documentElement.dataset.colorScheme="light",localStorage.setItem("mode","light"),document.getElementById("theme-light").checked=!0):t==="dark"?(document.documentElement.dataset.colorScheme="dark",localStorage.setItem("mode","dark"),document.getElementById("theme-dark").checked=!0):(delete document.documentElement.dataset.colorScheme,localStorage.removeItem("mode"),document.getElementById("theme-light").checked=!0)};i.classList.add("visible"),e(localStorage.getItem("mode")),document.getElementById("theme-light").addEventListener("click",()=>e("light")),document.getElementById("theme-dark").addEventListener("click",()=>e("dark"))},X=(i,e)=>{let t=document.querySelector(i);if(!t)return;let n=document.querySelector(e),r=t.querySelectorAll(".menu-item-has-children");new ResizeObserver(([{contentRect:l}])=>{r.forEach(c=>{let p=JSON.parse(c.querySelector("a").getAttribute("aria-expanded"));l.width>=_&&(c.addEventListener("mouseenter",()=>{document.querySelectorAll(".menu-open").forEach(d=>{d!==c&&(d.classList.remove("menu-open"),d.querySelector("a").setAttribute("aria-expanded","false"))}),c.querySelector("a").setAttribute("aria-expanded",!p),c.classList.toggle("menu-open"),c.querySelector(".sub-menu").removeAttribute("hidden"),document.body.classList.add("masthead-expanded")}),c.addEventListener("mouseleave",()=>{c.querySelector("a").setAttribute("aria-expanded","false"),c.classList.remove("menu-open"),c.querySelector(".sub-menu").setAttribute("hidden",""),document.body.classList.remove("masthead-expanded")}),window.addEventListener("keydown",d=>{d.key.includes("Escape")&&(document.body.classList.remove("masthead-expanded"),c.querySelector("a").setAttribute("aria-expanded","false"),c.classList.remove("menu-open"),c.querySelector(".sub-menu").setAttribute("hidden",""))}))})}).observe(n),r.forEach(l=>{let c=l.querySelector("a"),p=document.createElement("button");p.className="button-show-subnav",p.innerHTML=`<span>show sub menu for "${c.text}"</span>`,c.insertAdjacentElement("afterend",p),p.addEventListener("click",d=>{r.forEach(m=>{(m.classList.contains("current-menu-item")||m.classList.contains("current-menu-ancestor"))&&m.classList.remove("current-menu-item","current-menu-ancestor")}),l.classList.toggle("menu-open"),document.querySelectorAll(".menu-open").forEach(m=>{m!==l&&m.classList.remove("menu-open")}),l.classList.contains("menu-open")?(l.querySelector("a").setAttribute("aria-expanded","true"),p.setAttribute("aria-expanded","true"),l.querySelector(".sub-menu").removeAttribute("hidden")):(l.querySelector("a").setAttribute("aria-expanded","false"),p.setAttribute("aria-expanded","false"),l.querySelector(".sub-menu").setAttribute("hidden","")),d.preventDefault()})})},Q=i=>{document.querySelectorAll(i).forEach(e=>{let t=e.querySelector(".dgwltd-card__link");t&&e.addEventListener("click",n=>{window.getSelection().toString()||(window.location=t.href)})})},V=i=>{let e=new M.default("https://www.youtube.com/watch?v=dQw4w9WgXcQ")},T=class{constructor(e){document.querySelectorAll(e).forEach(t=>{t.setAttribute("rows",4),this.update(t)})}isScrolling(e){return e.scrollHeight>e.clientHeight}grow(e){let t=e.clientHeight,n=this.rows(e);for(;this.isScrolling(e);){n++,e.rows=n;let r=e.clientHeight;if(r===t)break;t=r}}shrink(e){let t=e.clientHeight,n=parseInt(e.dataset.minRows),r=this.rows(e);for(;!this.isScrolling(e)&&r>n&&(r--,e.rows=Math.max(r,n),e.clientHeight!==t);)if(this.isScrolling(e)){this.grow(e);break}}update(e){this.isScrolling(e)?this.grow(e):this.shrink(e)}rows(e){return e.rows||parseInt(e.dataset.minRows)}};document.addEventListener("DOMContentLoaded",()=>{U(),K(),z("#nav-toggle","#nav-primary","#masthead"),J(),X("#nav-primary","#masthead"),Q(".dgwltd-card"),new T("textarea"),V()});})();
